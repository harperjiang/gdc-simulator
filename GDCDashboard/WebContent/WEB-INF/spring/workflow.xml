<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:task="http://www.springframework.org/schema/task"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
						http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.0.xsd">

	<bean id="interfaceWorkflow" class="edu.clarkson.gdc.workflow.BasicWorkflow">
		<property name="units">
			<list>
				<bean class="edu.clarkson.gdc.workflow.ExecutionUnit">
					<property name="id" value="status" />
					<property name="bean" ref="interfaceService" />
					<property name="method" value="updateNodeStatus" />
					<property name="params" value="input:0,input:1,input:2" />
				</bean>

				<bean class="edu.clarkson.gdc.workflow.ExecutionUnit">
					<property name="id" value="trigger" />
					<property name="bean" ref="triggerService" />
					<property name="method" value="checkThreshold" />
					<property name="params" value="context:oldstatus,return:status" />
				</bean>

				<bean class="edu.clarkson.gdc.workflow.ExecutionUnit">
					<property name="id" value="history" />
					<property name="bean" ref="interfaceService" />
					<property name="method" value="updateNodeHistory" />
					<property name="params" value="input:0,input:1,input:2,input:3" />
				</bean>

				<bean class="edu.clarkson.gdc.workflow.ExecutionUnit">
					<property name="id" value="alert" />
					<property name="bean" ref="interfaceService" />
					<property name="method" value="updateAlert" />
					<property name="params" value="input:0,input:1,input:2" />
				</bean>

				<bean class="edu.clarkson.gdc.workflow.ExecutionUnit">
					<property name="id" value="sendAlert" />
					<property name="params" value="return:alert|return:trigger" />
					<property name="bean" ref="mediator" />
					<property name="method" value="send" />
				</bean>

			</list>
		</property>
	</bean>

</beans>